---
import MainLayout from '../layouts/MainLayout.astro';
import Header from '../components/Header.astro';
---

<MainLayout title="Buwara - We are all wanderers" showSplash={true}>
  <Header showBurgerMenu={true} />

  <div class="homepage">
    <!-- Map Section -->
    <section class="map-section">
      <!-- Map Image -->
      <div class="map-image-wrapper">
        <img
          src="/images/illustrations/home-map.jpeg"
          alt="Buwara Map"
          class="map-image"
        />
      </div>

      <!-- Map Content -->
      <div class="map-content">
        <div class="container-narrow">
          <h1 class="map-title">BUWARA MAP</h1>

          <!-- Journeys List -->
          <div class="journeys-list">
            <div class="journey-item">JOURNEY 01 - PAST & PRESENT</div>
            <div class="journey-item">JOURNEY 02 - FUTURE</div>
          </div>

          <!-- Description -->
          <p class="map-description">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
          </p>

          <!-- Rumah Adat -->
          <div class="rumah-adat-wrapper">
            <img
              src="/images/illustrations/home_rumah.png"
              alt="Traditional House"
              class="rumah-adat-image"
            />
            <p class="rumah-adat-caption">IMAGE 01 - TITLE</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer - Hidden for now -->
    <!-- <footer class="homepage-footer">
      <div class="container-narrow">
        <div class="footer-content">
          <div class="footer-logo">
            <img src="/images/logo/buwara logo black.png" alt="Buwara" class="footer-logo-img" />
          </div>
          <p class="footer-tagline">We are all wanderers</p>
          <div class="social-links">
            <a href="https://instagram.com/buwara" target="_blank" rel="noopener" class="social-link" aria-label="Instagram">
              <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
              </svg>
            </a>
            <a href="https://tiktok.com/@buwara" target="_blank" rel="noopener" class="social-link" aria-label="TikTok">
              <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/>
              </svg>
            </a>
            <a href="https://youtube.com/@buwara" target="_blank" rel="noopener" class="social-link" aria-label="YouTube">
              <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </footer> -->
  </div>
</MainLayout>

<style>
  .homepage {
    min-height: 100vh;
    background-color: var(--color-background);
  }

  /* Container */
  .container-narrow {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }

  /* Map Section */
  .map-section {
    padding: 0;
    padding-top: 4.5rem;
  }

  /* Map Image */
  .map-image-wrapper {
    width: 100%;
    max-height: 60vh;
    overflow: hidden;
    background-color: var(--color-warm);
  }

  .map-image {
    width: 100%;
    height: 100%;
    display: block;
    object-fit: cover;
  }

  /* Map Content */
  .map-content {
    padding: 1.5rem 0;
    position: relative;
  }

  .map-title {
    font-family: 'Forta', sans-serif;
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--color-primary);
    letter-spacing: 0.05em;
    margin-bottom: 1rem;
  }

  /* Journeys List */
  .journeys-list {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    margin-bottom: 1.25rem;
  }

  .journey-item {
    font-family: 'Montserrat', sans-serif;
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--color-primary);
    letter-spacing: 0.05em;
    text-transform: uppercase;
  }

  /* Map Description */
  .map-description {
    font-family: 'Montserrat', sans-serif;
    font-size: 0.75rem;
    line-height: 1.5;
    color: var(--color-primary);
    text-align: justify;
    margin-bottom: 3.5rem;
    max-width: 50%;
  }

  /* Rumah Adat */
  .rumah-adat-wrapper {
    position: absolute;
    top: 8.5rem;
    right: 1rem;
    text-align: center;
    max-width: 200px;
  }

  .rumah-adat-image {
    width: 100%;
    height: auto;
    display: block;
    margin: 0 auto 0.15rem auto;
  }

  .rumah-adat-caption {
    font-family: 'Montserrat', sans-serif;
    font-size: 0.55rem;
    font-weight: 600;
    color: var(--color-primary);
    letter-spacing: 0.05em;
    text-transform: uppercase;
    text-align: right;
  }

  /* Footer */
  .homepage-footer {
    padding: 2rem 0 2rem;
    border-top: 1px solid var(--color-warm);
    margin-top: 2rem;
  }

  .footer-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1.5rem;
    text-align: center;
  }

  .footer-logo {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .footer-logo-img {
    height: 2.5rem;
    width: auto;
  }

  .footer-tagline {
    font-size: 1rem;
    font-style: italic;
    color: var(--color-slate);
  }

  .social-links {
    display: flex;
    gap: 1.5rem;
    align-items: center;
  }

  .social-link {
    color: var(--color-slate);
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .social-link:hover {
    color: var(--color-primary);
    transform: translateY(-2px);
  }

  .social-link svg {
    width: 24px;
    height: 24px;
  }

  /* Responsive */
  @media (min-width: 640px) {
    .container-narrow {
      padding: 0 1.5rem;
    }

    .map-image-wrapper {
      max-height: 65vh;
    }

    .map-content {
      padding: 2rem 0;
    }

    .map-title {
      font-size: 1.25rem;
    }

    .journey-item {
      font-size: 0.8125rem;
    }

    .map-description {
      font-size: 0.875rem;
      margin-bottom: 5rem;
      max-width: 55%;
    }

    .rumah-adat-wrapper {
      top: 9rem;
      right: 1.5rem;
      max-width: 185px;
    }

    .rumah-adat-caption {
      font-size: 0.6rem;
    }
  }

  @media (min-width: 768px) {
    .map-section {
      padding-top: 5rem;
    }

    .map-image-wrapper {
      max-height: 70vh;
    }

    .map-content {
      padding: 2.5rem 0;
    }

    .map-title {
      font-size: 1.5rem;
      margin-bottom: 1.25rem;
    }

    .journeys-list {
      gap: 0.3rem;
      margin-bottom: 1.5rem;
    }

    .journey-item {
      font-size: 0.875rem;
    }

    .map-description {
      font-size: 1rem;
      line-height: 1.6;
      margin-bottom: 6rem;
      max-width: 58%;
    }

    .rumah-adat-wrapper {
      top: 10rem;
      right: 2rem;
      max-width: 180px;
    }

    .rumah-adat-caption {
      font-size: 0.65rem;
    }
  }

  @media (min-width: 1024px) {
    .container-narrow {
      padding: 0 2rem;
    }

    .map-image-wrapper {
      max-height: none;
    }

    .map-content {
      padding: 3rem 0;
    }

    .map-title {
      font-size: 1.75rem;
    }

    .journey-item {
      font-size: 0.9375rem;
    }

    .map-description {
      font-size: 1.0625rem;
      line-height: 1.7;
      margin-bottom: 7rem;
      max-width: 60%;
    }

    .rumah-adat-wrapper {
      top: 11rem;
      right: 3rem;
      max-width: 220px;
    }

    .rumah-adat-caption {
      font-size: 0.75rem;
    }
  }
</style>

<script>
  // Redirect first-time visitors to intro page
  if (typeof window !== 'undefined') {
    const hasVisitedIntro = localStorage.getItem('hasVisitedIntro');

    // If user hasn't visited intro page yet, redirect to /intro
    if (!hasVisitedIntro) {
      window.location.href = '/intro';
    }
  }

  // Hide header on scroll down, show on scroll up or at top
  const header = document.querySelector('.site-header') as HTMLElement;
  let lastScrollTop = 0;

  if (header) {
    window.addEventListener('scroll', () => {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

      // If at top of page (within 50px), always show header
      if (scrollTop <= 50) {
        header.style.opacity = '1';
        header.style.transform = 'translateY(0)';
      } else {
        // Scrolling down - hide header
        if (scrollTop > lastScrollTop) {
          header.style.opacity = '0';
          header.style.transform = 'translateY(-100%)';
        }
        // Scrolling up - show header
        else {
          header.style.opacity = '1';
          header.style.transform = 'translateY(0)';
        }
      }

      lastScrollTop = scrollTop;
    }, { passive: true });
  }
</script>
